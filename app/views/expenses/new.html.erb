<!--
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-6">
      <div class="form-container p-4 shadow rounded">
        <h1>Create new expense</h1>
        <%= simple_form_for @expense do |f| %>
          <div class="form-container">
            <%= f.input :title, label: "Title", required: true %>
            <%= f.input :description, label: "Description", required: true %>
            <%= f.input :category, label: "Category", required: true %>
            <%= f.input :amount, label: "Amount", required: true %>
            <%= f.input :document, as: :file, required: false %>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <%= link_to "Cancel", root_path, class: "btn btn-secondary" %>
            </div>
            <div>
              <%= f.submit "Submit", class: "btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
-->
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-6">
      <div class="form-container p-4 shadow rounded">
        <h1>Create new expense</h1>
        <%= simple_form_for @expense do |f| %>
          <div class="form-container">
            <%= f.input :title, label: "Title", required: true %>
            <%= f.input :description, label: "Description", required: true %>
            <%= f.input :category, label: "Category", required: true %>
            <%= f.input :amount, label: "Amount", required: true %>
            <%= f.input :house_id, as: :select, collection: House.all.pluck(:name, :id), prompt: 'Select House', label: "House" %>
            <%= f.input :document, as: :file, required: false %>
          </div>
          <div class="d-flex justify-content-between">
            <div>
              <%= link_to "Cancel", root_path, class: "btn btn-secondary" %>
            </div>
            <div>
              <%= f.submit "Submit", class: "btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<!-- JavaScript -->
<%# <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $('.type-dropdown').change(function() {
      var selectedType = $(this).val();
      if (selectedType === 'house') {
        $('#house-dropdown').show();
      } else {
        $('#house-dropdown').hide();
      }
    });

    $('.type-dropdown').change(function() {
      var selectedType = $(this).val();
      if (selectedType === 'house') {
        // Make an Ajax request to fetch houses and update the second dropdown
        $.ajax({
          url: '/houses', // Replace with your actual endpoint to fetch houses
          method: 'GET',
          dataType: 'json',
          success: function(data) {
            // Update the options in the second dropdown
            var options = data.map(function(house) {
              return $('<option>').val(house.id).text(house.name);
            });
            $('.house-dropdown').html(options);
          },
          error: function() {
            console.error('Failed to fetch houses.');
          }
        });
      }
    });
  });
</script> %>
